generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id         String           @id @default(uuid())
  email      String           @unique
  createdAt  DateTime         @default(now())
  username   String           @unique
  avatar     Avatar?
  comments   Comment[]
  divesTests DiveTestfordev[]
  dives      Dives[]
  likes      Like[]
  posts      Post[]
}

model Avatar {
  id     String @id @default(cuid())
  url    String @unique
  userId String @unique
  user   User   @relation(fields: [userId], references: [id])
}

model Post {
  id        String    @id @default(cuid())
  content   String
  createdAt DateTime  @default(now())
  imageUrl  String?
  userId    String
  caption   String
  comments  Comment[]
  likes     Like[]
  user      User      @relation(fields: [userId], references: [id])
}

model Comment {
  id        String         @id @default(cuid())
  content   String
  userId    String
  postId    String
  createdAt DateTime       @default(now())
  divelogId String
  divesId   String?
  divelog   DiveTestfordev @relation(fields: [divelogId], references: [id])
  dives     Dives?         @relation(fields: [divesId], references: [id])
  post      Post           @relation(fields: [postId], references: [id])
  user      User           @relation(fields: [userId], references: [id])
}

model Like {
  id        String         @id @default(cuid())
  userId    String
  postId    String
  createdAt DateTime       @default(now())
  divelogId String
  divesId   String?
  divelog   DiveTestfordev @relation(fields: [divelogId], references: [id])
  dives     Dives?         @relation(fields: [divesId], references: [id])
  post      Post           @relation(fields: [postId], references: [id])
  user      User           @relation(fields: [userId], references: [id])
}

model Dives {
  id                            String    @id @default(cuid())
  dive_number                   Int       @default(autoincrement())
  dive_date                     DateTime
  entry_time                    String
  exit_time                     String
  location                      String
  buddy_instructor              String?
  maximum_depth                 Int?
  bottom_time                   String?
  air_consumption_start_psi_bar Int?
  air_consumption_end_psi_bar   Int?
  average_depth                 String?
  surface_interval              String?
  water_temperature_surface     String?
  water_temperature_depth       Float?    @default(0.00)
  visibility                    Int?
  currents_conditions           String?
  equipment_exposure_suit       String?
  equipment_tank_type_size      String?
  equipment_additional          String?
  userId                        String
  content                       String
  comments                      Comment[]
  user                          User      @relation(fields: [userId], references: [username])
  likes                         Like[]
}

model DiveTestfordev {
  id            String    @id @default(cuid())
  location      String
  userId        String
  content       String
  dive_number   Int
  dive_date     DateTime
  maximum_depth Int
  bottom_time   Int
  comments      Comment[]
  user          User      @relation(fields: [userId], references: [id])
  likes         Like[]
}
